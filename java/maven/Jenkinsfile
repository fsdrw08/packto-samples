pipeline {
    agent {
        label "docker-agent"
    }
    stages {
        stage("test") {
            steps {
                script {
                    sh '''
                        whoami
                    '''
                    sh '''
                        ls -al /var/run/docker.sock
                    '''
                    sh '''
                        ls -al
                    '''
                    sh '''
                        docker run \
                            --rm \
                            --privileged \
                            --tmpfs /tmp:rw \
                            --volume ./go.mod:/var/run/docker.sock \
                            --volume ./java/maven/:/workspace:rw \
                            --workdir /workspace \
                            --env HOME="/workspace" \
                            docker.io/buildpacksio/pack:latest --version

                    '''
                }
            }
        }
    }
}
                            // build \
                            //     --trust-builder \
                            //     paketo-demo-app \
                            //     --path . \
                            //     --builder docker.io/paketobuildpacks/builder:base \
                            //     --buildpack docker.io/paketobuildpacks/java-azure:10